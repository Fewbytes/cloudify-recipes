#This is the old untemplated file!!!

#set up the "debug" alias to enter the debug shell
if ! alias debug &>/dev/null ; then
    echo >>$HOME/.bashrc '#This is the old untemplated file!!!'
    echo >>$HOME/.bashrc 'alias debug="bash --rcfile $HOME/debugrc"'
    echo >>$HOME/.bashrc 'echo "A cloudify debug shell is available for you by typing \"debug\""'
    echo >>$HOME/.bashrc 'alias debug="bash --rcfile $HOME/debugrc"'
fi

#Enter a loop to avoid proceeding to the next step until the user finished debugging
:>$KEEPALIVE_FILE
while [[ -f $KEEPALIVE_FILE ]]; do
    echo "The service $USM_SERVICE_NAME (script $SCRIPT_NAME) is waiting to be debugged on $CLOUDIFY_AGENT_ENV_PUBLIC_IP."
    echo "When finished, delete the file $KEEPALIVE_FILE (or use the 'finish' debug command)"
    sleep 60
done
